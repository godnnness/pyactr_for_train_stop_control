#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Time : 2020/9/20 21:58
# @Author : Yulong Sun
# @Site : 
# @File : newPIDcon.py
# @Software: PyCharm
import math
import xlrd
import matplotlib.pyplot as plt

# t=309
# tt={}
# tt1=[]
# result=[]
# workbook = xlrd.open_workbook(r'..\pyactrforstoptrain1\s-d1.xlsx')
# # workbook = xlrd.open_workbook(r'C:\Users\syl\Desktop\trainforactr\myDriveForChunk.xlsx')
# booksheet = workbook.sheet_by_index(0)  # 用索引取第一个sheet
# speed,limitspeed= [], []
# for i in booksheet.col_values(0):
#     speed.append(int(i))
# for i in booksheet.col_values(13):
#     limitspeed.append(round(i))
# # 划分成3090个数据
# print("speed:",speed)
# print("limitspeed:",limitspeed)
#
# for i in range(len(limitspeed)):
#     tt.setdefault(limitspeed[i], speed[i])
# print("tt:",tt)
# x=[]
# for i in range(309):
#     if tt.get(i):
#         # print(tt[i])
#         pass
#     else:
#         x.append(i)
#         tt[i]=tt[i-1]+0.1
# print("改变后得tt:",tt,len(tt))
#
# print("缺数据：",x,)
# print("len(x):",len(x))
#         # tt.setdefault(i,tt.get(i-1)+0.01)
#
# next=[270, 270, 269, 266, 264, 264, 261, 261, 258, 258, 255, 255, 253, 253, 250, 250, 248, 247, 245, 244, 243, 242, 241, 240, 239, 239, 236, 236, 234, 234, 232, 229, 229, 229, 227, 225, 224, 224, 223, 222, 217, 217, 217, 214, 214, 213, 211, 208, 208, 207, 204, 203, 200, 200, 198, 194, 194, 191, 191, 188, 188, 186, 184, 181, 177, 177, 173, 173, 171, 170, 166, 166, 164, 162, 158, 157, 155, 152, 152, 151, 148, 146, 146, 143, 143, 141, 141, 139, 138, 137, 136, 135, 135, 133, 132, 131, 130, 129, 127, 127, 126, 125, 124, 123, 122, 121, 118, 117, 116, 114, 114, 113, 112, 112, 112, 112, 112, 111, 108, 108, 106, 103, 102, 100, 96, 96, 94, 92, 88, 86, 82, 82, 80, 77, 75, 75, 74, 72, 72, 72, 71, 71, 71, 70, 69, 69, 69, 69, 68, 68, 67, 66, 65, 64, 63, 62, 62, 60, 58, 58, 56, 56, 55, 54, 53, 52, 51, 50, 50, 48, 46, 46, 45, 43, 40, 38, 37, 37, 35, 33, 32, 32, 31, 31, 31, 29, 28, 27, 25, 25, 24, 22, 20, 20, 19, 19, 16, 15, 15, 13, 13, 11, 11, 10, 10, 10, 10, 9, 8, 7, 7, 6, 6, 6, 5, 4, 4, 3, 3, 1, 1, 0, 266.1, 255.1, 255.1, 255.1, 253.1, 250.1, 249.1, 239.1, 232.1, 227.1, 223.1, 214.1, 203.1, 203.1, 197.1, 191.1, 186.1, 182.1, 182.1, 178.1, 166.1, 157.1, 157.1, 154.1, 152.1, 152.1, 151.1, 149.1, 149.1, 148.1, 146.1, 143.1, 141.1, 141.1, 139.1, 139.1, 138.1, 138.1, 138.1, 137.1, 136.1, 136.1, 134.1, 133.1, 131.1, 130.1, 129.1, 128.1, 126.1, 125.1, 116.1, 114.1, 114.1, 112.1, 111.1, 108.1, 106.1, 102.1, 102.1, 100.1, 96.1, 94.1, 92.1, 92.1, 88.1, 86.1, 86.1, 86.1, 84.1, 82.1, 80.1, 78.1, 77.1, 75.1, 74.1, 73.1, 72.1, 72.1, 72.1, 71.1, 71.1, 71.1, 71.1, 70.1, 69.1, 69.1, 69.1, 69.1, 0]
# print("速度",len(next))
#
#
# for i in range(309):
#     if i in tt.keys():
#         tt1.append(tt[i])
#
# # for i in tt.keys():
# #     tt1.append(tt[i])
# # tt1.append(0)
# print("tt1:",tt1)
# print("len(tt1):",len(tt1))
#
# for i in range(len(tt1)):
#     for j in range(10):
#         if i<len(tt1)-1:
#             result.append((tt1[i+1]-tt1[i])/10*j+tt1[i])
# result.append(0)
# print("result得长度",len(result))
# print("result:",result)


# for i in range(1,309):
#     a_1=(9155.7+75*i-1.5*309*75)/(1.5*309*i-i*i)
#     a_2=-(75+a_1*i)/(309-i)
#     if a_1>-0.6 and a_2>-0.6:
#         print(a_1,a_2,i,309-i)
# a_1=-0.216759690667179
# a_2=-0.2847364329031255
# t_1=191
# t_2=118
# s=75*t_1+0.5*a_1*t_1*t_1+(75+a_1*t_1)*t_2+0.5*a_2*t_2*t_2
# print("!!!!!!!!!!",s)

# 0.4001165048543689 0.16740837088307708 100 209
# 0.3449249779346866 0.14117131224553714 154 155
s=9155.7
v_0=75
x=[]
for t_1 in range(1,309):
    a_1=2*(-s+v_0*t_1+0.5*v_0*(309-t_1))/(t_1*t_1+t_1*(309-t_1))
    t_2=309-t_1
    a_2=(v_0-a_1*t_1)/(309-t_1)
    if 0.3<a_1<0.6 and 0.1<a_2<0.6 and abs(a_1-a_2)<0.3:
        x.append(abs(a_1-a_2))
        print(min(x),a_1,a_2,t_1,t_2,abs(a_1-a_2))


s=v_0*154-0.5*0.3449249779346866*154*154+(v_0-0.3449249779346866*154)*155-0.5*0.14117131224553714*155*155
print(s)




